<% content_for :page_title, "My Profile" %>

<!-- User infomation and events -->
<div class="row container main-content">

  <div class="row"><h4 class="br-5 s ctr"><%= @user.full_name %></h4><br></div>
  <div class="row">
    <div class="col l3 m4 s12" style="text-align: center;">
      <%= image_tag @user.image, :class => "circle", :id => "ui-segment" %>
      <% if current_user %>
        <%= link_to "Edit Profile", edit_user_path(@current_user.id), :id => "cancel_user_button", :class => "btn user-action-button green accent-4 s br-15", :method => :get %>
        <%= link_to "Delete", user_path(@current_user.id), :id => "cancel_user_button", :class => "btn user-action-button red s br-15", :method => :delete %>
      <% end %>
    </div>
    <div class="col l9 m8 s12 s br-35">
      <div class="speech-bubble light-blue darken-3">
        <div class="speech-bubble-content white-text">
          <div class="status-icon"><i class="fa fa-commenting-o small" aria-hidden="true">&nbsp;&nbsp;</i></div>
          <div class="status-text"><%= @user.status %></div>
        </div>
        <div class="speech-carrot blue"></div>
      </div>
      <ul class="collection user-info-collection">
        <% if @user.email && @user.email != "" %>
          <li class="collection-item">
            <div class="collection-item-content">
              <span class="grey-text"><i class="fa fa-envelope" aria-hidden="true"></i> &nbsp;Email</span>
              &nbsp;&nbsp;<%= @user.email %>
            </div>
          </li>
        <% end %>
        <% if @user.gender && @user.gender != "" %>
          <li class="collection-item">
            <div class="collection-item-content">
              <span class="grey-text"><i class="fa fa-mars-stroke" aria-hidden="true"></i> &nbsp;Gender</span>
              &nbsp;&nbsp;<%= @user.gender.capitalize %>
            </div>
          </li>
        <% end %>
        <% if @user.address && @user.address != "" %>
          <li class="collection-item">
            <div class="collection-item-content">
              <span class="grey-text"><i class="fa fa-map-marker" aria-hidden="true"></i> &nbsp;Address</span>
              &nbsp;&nbsp;<%= @user.address %>
            </div>
          </li>
        <% end %>
        <% if @user.country && @user.country != "" %>
          <li class="collection-item">
            <div class="collection-item-content">
              <span class="grey-text"><i class="fa fa-map-marker" aria-hidden="true"></i> &nbsp;Country</span>
              &nbsp;&nbsp;<%= @user.country %>
            </div>
          </li>
        <% end %>
        <% if @user.city && @user.city != "" %>
          <li class="collection-item">
            <div class="collection-item-content">
              <span class="grey-text"><i class="fa fa-map-marker" aria-hidden="true"></i> &nbsp;City</span>
              &nbsp;&nbsp;<%= @user.city %>
            </div>
          </li>
        <% end %>
        <% if @user.zipcode && @user.zipcode != "" %>
          <li class="collection-item">
            <div class="collection-item-content">
              <span class="grey-text"><i class="fa fa-map-marker" aria-hidden="true"></i> &nbsp;Zipcode</span>
              &nbsp;&nbsp;<%= @user.zipcode %>
            </div>
          </li>
        <% end %>
        <% if @user.phone_number && @user.phone_number != "" %>
          <li class="collection-item">
            <div class="collection-item-content">
              <span class="grey-text"><i class="fa fa-phone" aria-hidden="true"></i> &nbsp;Phone</span>
              &nbsp;&nbsp;<%= @user.phone_number %>
            </div>
          </li>
        <% end %>
        <% if @user.description && @user.description != "" %>
          <li class="collection-item">
            <div class="collection-item-content">
              <span class="grey-text"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> &nbsp;Description</span>
              &nbsp;&nbsp;<%= @user.description %>
            </div>
          </li>
        <% end %>
        <% if @user.availability && @user.availability != "" %>
          <li class="collection-item">
            <div class="collection-item-content">
              <span class="grey-text"><i class="fa fa-calendar" aria-hidden="true"></i> &nbsp;Availability</span>
              &nbsp;&nbsp;<%= @user.availability %>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>

<!-- User's dogs if not current_user -->
<% if current_user %>
  <div class="row container">
    <div class="col l8 m6 s12">
      <div class="row ctr s"><h4>Dogs</h4></div>
      <div class="row">
        <% if @user.dogs.count != 0 then %>
          <div class="row center-align valign-wrapper no-dogs-message-container">
            <div class="col l12 m12 s12 valign no-dogs-message">
              <div> No dogs yet! </div>
            </div>
          </div>
        <% else %>
          <div class="row container main-content">
          <% @user.dogs.each do |dog| %>
            <div class="col s12 m12 l6">
              <div class="card">
                <div class="card-image waves-effect waves-block waves-light">
                  <% if dog.photo.file? %>
                    <%= image_tag dog.photo.url(:small), :class => "activator card-img" %>
                  <% else %>
                    <%= image_tag "default_dog.jpg", :class => "activator card-img" %>
                  <% end %>
                </div>
                <div class="card-content">
                  <span class="card-title activator grey-text text-darken-4"><%= dog.name %><i class="material-icons card-more-icon right">more_vert</i></span>
                </div>
                <div class="card-action">
                  <a href="<%= dog_path(dog.id) %>" class="light-blue-text text-darken-3">Details</a>
                   <% if @own_profile %>
                    <a href="<%= edit_dog_path(dog.id) %>" class="green-text text-accent-4">Edit</a>
                  <% end %>
                </div>
                <div class="card-reveal">
                  <span class="card-title grey-text text-darken-4"><a href="<%= dog_path(dog.id) %>">About <%= dog.name %></a>
                    <i class="material-icons right tooltipped" data-position="bottom" data-delay="50" data-tooltip="Close">close</i>
                    <a href="<%= edit_dog_path(dog.id) %>"><i class="material-icons right tooltipped green-text text-accent-4" data-position="bottom" data-delay="50" data-tooltip="Edit Dog">edit</i></a>
                  </span>
                  <ul class="dog-info-list">
                    <li class="dog-info-list-item"><strong>Status</strong> <%= dog.motto %></li>
                    <li class="dog-info-list-item"><strong>Age</strong> <%= dog.age_caption %></li>
                    <li class="dog-info-list-item"><strong>Gender</strong> <%= dog.gender %></li>
                    <li class="dog-info-list-item"><strong>Mix</strong> <%= dog.readable_mixes.join(", ") %></li>
                    <li class="dog-info-list-item"><strong>Size</strong> <%= dog.size %></li>
                    <li class="dog-info-list-item"><strong>Personality</strong> <%= dog.tags %></li>
                    <li class="dog-info-list-item"><strong>Energy</strong> <%= dog.energy_level %></li>
                    <li class="dog-info-list-item"><strong>Likes</strong> <%= dog.readable_likes.join(", ") %></li>
                    <li class="dog-info-list-item"><strong>Barks</strong> Rarely</li>
                    <li class="dog-info-list-item"><strong>Health Notes</strong> <%= dog.health %></li>
                    <li class="dog-info-list-item"><strong>Description</strong> <%= dog.description %></li>
                    <li class="dog-info-list-item"><strong>Availability</strong> <%= dog.availability %></li>
                  </ul>
                </div>
              </div>
            </div>
          <% end %>
          </div>
          <div class="fixed-action-btn hide-on-med-and-up" style="bottom: 45px; right: 24px;">
            <a href="<%= new_dog_path %>" class="btn-floating btn-large waves-effect waves-light green accent-4 hide-on-large-only"><i class="material-icons">add</i></a>
          </div>
        <% end %>
      </div>
    </div>
    <div class="col l4 m6 s12">
      <div class="row ctr s"><h4>Events</h4></div>
        <% if @user.events.count == 0 then %>
          <div class="row center-align valign-wrapper no-dogs-message-container">
            <div class="col l12 m12 s12 valign no-events-message">
              <div>No events yet!</div>
            </div>
          </div>
        <% else %>
          <!-- TODO(jacensherman): Add in events -->
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<!--
<div class="row container main-content">  
  <div id="profile-page-header" class="card col s12">
    <br />
    <div id="name" class="center-align">
      <div><%= image_tag @user.image, :class => "circle", :id => "ui-segment" %></div> 
      <div id = user_profile_name ><%= @user.full_name %></div>
    </div>
    </br>
  </div>
  
  <div id="profile-page-sidebar" class="col s12 m4 row">
    <div class="card light-blue center-align">
      <div class="card-content white-text">
        <span class="card-title">About Me </span>
        <% if @own_profile %>
          <%= link_to edit_user_path(@user.id), id:"edit_dog_pencil", title:"Edit Profile" do %>
            <i class="fa fa-pencil" aria-hidden="true" id="edit_dog_pencil"></i>
          <% end %>
        <% end %>
        <% if not @user.description.nil? and not @user.description == ""  %>
          <div id="user_description">
            <div id="description">
              <p>
                <em><%= @user.description %></em>
              </p>
            </div>
          </div>
        <%end%>
      </div>                  
    </div>
    
    <ul id="profile-page-about-details" class="collection z-depth-1">
      <li class="collection-item">
        <div class="row">
          <div class="col s5 grey-text darken-1 left-align"><i class="fa fa-mars-stroke" aria-hidden="true"></i> Gender</div>
          <div class="col s7 grey-text text-darken-4 right-align"><%= @user.gender %></div>
        </div>
      </li>
      <% if not @user.zipcode.nil? and not @user.zipcode == ""  %>
        <li class="collection-item">
          <div class="row">
            <div class="col s5 grey-text darken-1 left-align"><i class="fa fa-location-arrow" aria-hidden="true"></i> Zipcode</div>
            <div class="col s7 grey-text text-darken-4 right-align"><%= @user.zipcode %></div>
          </div>
        </li>
      <%end%>
      <li class="collection-item">
        <div class="row">
          <div class="col s5 grey-text darken-1 left-align"><i class="fa fa-commenting-o" aria-hidden="true"></i> Status</div>
          <div class="col s7 grey-text text-darken-4 right-align"><%= @user.status %></div>
        </div>
      </li>
      <% if not @user.availability.nil? and not @user.availability == ""  %>
        <p id="availability">
          <li class="collection-item">
            <div class="row">
              <div class="col s5 grey-text darken-1 left-align"><i class="fa fa-calendar-check-o" aria-hidden="true"></i> Available</div>
              <div class="col s7 grey-text text-darken-4 right-align"><%= @user.availability %></div>
            </div>
          </li>
        </p>
      <% end %>
      <% if current_user %>
        <% if @user.address != nil && @user.address != ""%>
          <li class="collection-item">
            <div class="row">
              <div class="col s5 grey-text darken-1 left-align"><i class="fa fa-map-marker" aria-hidden="true"></i> Location</div>
              <div class="col s7 grey-text text-darken-4 right-align"><%= "#{@user.address}, #{@user.city}, #{@user.zipcode}, #{@user.country}" %></div>
            </div>
          </li>
        <%end%>
          <li class="collection-item">
            <div class="row">
              <div class="col s5 grey-text darken-1 left-align"><i class="fa fa-envelope-o" aria-hidden="true"></i> Email</div>
              <div class="col s7 grey-text text-darken-4 right-align"><%= @user.email %></div>
            </div>
          </li>
    
        <% if not @user.phone_number.nil? and not @user.phone_number == ""  %>
          <div id="phone_number">
            <li class="collection-item">
              <div class="row">
                <div class="col s5 grey-text darken-1 left-align"><i class="fa fa-phone" aria-hidden="true"></i> Phone</div>
                <div class="col s7 grey-text text-darken-4 right-align"><%= @user.phone_number %></div>
              </div>
            </li>
          </div>
        <%end%>
      <%else%>
        <% if @user.address != nil && @user.address != ""%>
        <div id="location">
          <li class="collection-item">
            <div class="row">
              <div class="col s5 grey-text darken-1 left-align"><i class="fa fa-map-marker"></i> Location</div>
              <div class="col s7 grey-text text-darken-4 right-align"> You must <%= link_to "log in", "/auth/facebook/?type=login", id: 'log_in' %> to view!</div>
            </div>
          </li>
        </div>
        <%end%>
        <p id="email">
          <li class="collection-item">
            <div class="row">
              <div class="col s5 grey-text darken-1 left-align"><i class="mail icon"></i> Email</div>
              <div class="col s7 grey-text text-darken-4 right-align"> You must <%= link_to "log in", "/auth/facebook/?type=login", id: 'log_in' %> to view!</div>
            </div>
          </li>
        </p>
        <% if not @user.phone_number.nil? and not @user.phone_number == ""  %>
          <p id="phone_number">
            <li class="collection-item">
              <div class="row">
                <div class="col s5 grey-text darken-1 left-align"><i class="call icon"></i> Phone</div>
                <div class="col s7 grey-text text-darken-4 right-align"> You must <%= link_to "log in", "/auth/facebook/?type=login", id: 'log_in' %> to view!</div>
              </div>
            </li>
          </p>
        <%end%>
      <%end%>
    </ul>
  </div>
  <div class="col s12 m8 l8">
    
    <div class="card teal center-align">
      <div class="card-content white-text">
        <span class="card-title">
           My Dogs
        </span>
        <% if @own_profile %>
          <%= link_to new_dog_path(), id:"add_dog_plus", title:"Add Dog" do %>
            <i class="fa fa-plus" aria-hidden="true"></i>
          <% end %>
        <% end %>
      </div>
    </div>
    
    <div class="card">
      <div class="container">
        <% if @user.dogs.count == 0 then %>
          <div class="row center-align valign-wrapper no-dogs-message-container">
            <div class="col l12 m12 s12 valign no-dogs-message">
              No dogs yet! <br>
            </div>
          </div>
        <% else %>
          <div class="row container main-content">
          <% @user.dogs.each do |dog| %>
            <div class="col s12 m12s l6">
              <div class="card">
                <div class="card-image waves-effect waves-block waves-light">
                  <img class="activator card-img" src="<%= dog.image %>">
                </div>
                <div class="card-content">
                  <span class="card-title activator grey-text text-darken-4"><%= dog.name %><i class="material-icons card-more-icon right">more_vert</i></span>
                </div>
                <div class="card-action">
                  <a href="<%= dog_path(dog.id) %>" class="light-blue-text text-darken-3">Details</a>
                   <% if @own_profile %>
                    <a href="<%= edit_dog_path(dog.id) %>" class="green-text text-accent-4">Edit</a>
                  <% end %>
                </div>
                <div class="card-reveal">
                  <span class="card-title grey-text text-darken-4"><a href="<%= dog_path(dog.id) %>">About <%= dog.name %></a>
                    <i class="material-icons right tooltipped" data-position="bottom" data-delay="50" data-tooltip="Close">close</i>
                    <a href="<%= edit_dog_path(dog.id) %>"><i class="material-icons right tooltipped green-text text-accent-4" data-position="bottom" data-delay="50" data-tooltip="Edit Dog">edit</i></a>
                  </span>
                  <ul class="dog-info-list">
                    <li class="dog-info-list-item"><strong>Status</strong> <%= dog.motto %></li>
                    <li class="dog-info-list-item"><strong>Age</strong> <%= dog.age_caption %></li>
                    <li class="dog-info-list-item"><strong>Gender</strong> <%= dog.gender %></li>
                    <li class="dog-info-list-item"><strong>Mix</strong> <%= dog.readable_mixes.join(", ") %></li>
                    <li class="dog-info-list-item"><strong>Size</strong> <%= dog.size %></li>
                    <li class="dog-info-list-item"><strong>Personality</strong> <%= dog.tags %></li>
                    <li class="dog-info-list-item"><strong>Energy</strong> <%= dog.energy_level %></li>
                    <li class="dog-info-list-item"><strong>Likes</strong> <%= dog.readable_likes.join(", ") %></li>
                    <li class="dog-info-list-item"><strong>Barks</strong> Rarely</li>
                    <li class="dog-info-list-item"><strong>Health Notes</strong> <%= dog.health %></li>
                    <li class="dog-info-list-item"><strong>Description</strong> <%= dog.description %></li>
                    <li class="dog-info-list-item"><strong>Availability</strong> <%= dog.availability %></li>
                  </ul>
                </div>
              </div>
            </div>
          <% end %>
          </div>
          <div class="fixed-action-btn hide-on-med-and-up" style="bottom: 45px; right: 24px;">
            <a href="<%= new_dog_path %>" class="btn-floating btn-large waves-effect waves-light green accent-4 hide-on-large-only"><i class="material-icons">add</i></a>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
-->